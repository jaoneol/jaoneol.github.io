---
title: 알쓸패잡
description: Let's learn `requests`, `httpx`, and `aiohttp`
author: DS2Man
date: 2125-04-18 11:00:00 +0000
categories: [Backend, FastAPI]
tags: [Backend, FastAPI]
math: true
pin: true
---

알아두면 좋은 FastAPI 특징 모음

## *Return a Response Directly*

https://fastapi.tiangolo.com/advanced/response-directly/
FastAPI는 기본적으로 `dict`, `list`, `pydantic model` 등을 반환하면 자동으로 JSON으로 변환하여 `application/json` 응답을 생성합니다. 즉, `return result` 만으로도 충분하며 더 간결하고 FastAPI의 철학에 맞는 방식입니다.

|상황|추천 방식|설명|
|---|---|---|
|FastAPI가 자동으로 예외 처리하게 하고 싶을 때|`raise HTTPException(...)`|가장 일반적인 에러 처리 방식. 문서화에 자동 반영됨|
|상태 코드, 헤더, content-type 등을 세밀하게 제어하고 싶을 때|`return JSONResponse(...)`|커스텀 응답이 필요한 경우에 사용|

```python
@router.get("/info")
async def get_basic_info(
    errorcase: Optional[str] = None, errormsg: Optional[str] = None
):
    try:
        result = {"errorcase": errorcase, "description": errormsg}

        if result.get("errorcase") == "ErrorCase1":
            raise HTTPException(status_code=404, detail="정보를 찾을 수 없습니다.")

		if result.get("errorcase") == "ErrorCase2":
            raise ValueError("강제 에러 발생")  # 이건 except 블록에서 처리됨

        return result

    except HTTPException as e:
        print(f'HTTPException : {e}')
        raise e

    except Exception as e:
        return JSONResponse(
            status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
            content={
                "error": "InternalServerError",
                "message": f"서버 오류: {str(e)}",
                "code": 1001
            }
        )
```
